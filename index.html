<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>SQL Query Practice</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/sql.js/1.6.2/sql-wasm.js"></script>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background-color: #d9f3ff; /* Light blue */
      color: #333;
      padding: 20px;
      background-image: 
        url("C:\Users\amool\Downloads\sql.png"),  /* SQL icon */
        url("C:\Users\amool\Downloads\brain.jpeg");  /* Brain with light */
      background-repeat: no-repeat, no-repeat;
      background-position: top right, bottom left;
      background-size: 120px, 150px;
    }

    .container {
      max-width: 900px;
      margin: auto;
      background: #ffffff;
      padding: 30px;
      border-radius: 10px;
      box-shadow: 0 0 10px #999;
    }

    h1 {
      text-align: center;
      color: #0077b6;
    }

    p {
      text-align: center;
      font-size: 14px;
      color: #555;
      margin-bottom: 20px;
    }

    textarea {
      width: 100%;
      height: 100px;
      font-size: 16px;
      background: #f0faff;
      color: #333;
      border: 1px solid #bbb;
      border-radius: 5px;
      padding: 10px;
    }

    button {
      margin-top: 10px;
      padding: 10px 20px;
      font-weight: bold;
      background: #0077b6;
      color: #fff;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }

    button:hover {
      background: #0096c7;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
    }

    table th, table td {
      border: 1px solid #ccc;
      padding: 10px;
      text-align: left;
    }

    .error {
      margin-top: 10px;
      color: #d00000;
      font-weight: bold;
    }

    .info {
      margin-top: 10px;
      color: #2a9d8f;
      font-weight: bold;
    }

    footer {
      margin-top: 30px;
      text-align: center;
      font-size: 14px;
      color: #666;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ðŸ§  SQL Query Practice</h1>
    <p>Type a SELECT query and run it on sample employee data below.</p>

    <textarea id="query" placeholder="Example: SELECT * FROM employees;"></textarea>
    <button onclick="runQuery()">Run Query</button>

    <div id="output"></div>

    <footer>
      &copy; 2025 Amoolya. All rights reserved.
    </footer>
  </div>

  <script>
    let db;

    const initSql = `
      CREATE TABLE employees (id INTEGER, name TEXT, department TEXT, salary INTEGER);
      INSERT INTO employees VALUES (1, 'Alice', 'HR', 50000);
      INSERT INTO employees VALUES (2, 'Bob', 'Engineering', 75000);
      INSERT INTO employees VALUES (3, 'Charlie', 'Sales', 60000);
      INSERT INTO employees VALUES (4, 'David', 'Engineering', 80000);
      INSERT INTO employees VALUES (5, 'Eva', 'Marketing', 55000);
    `;

    initSqlJs({
      locateFile: file => `https://cdnjs.cloudflare.com/ajax/libs/sql.js/1.6.2/${file}`
    }).then(SQL => {
      db = new SQL.Database();
      db.run(initSql);
    });

    function runQuery() {
      const query = document.getElementById("query").value.trim();
      const output = document.getElementById("output");
      output.innerHTML = "";

      try {
        if (!query.toLowerCase().startsWith("select")) {
          throw new Error("Only SELECT queries are allowed.");
        }

        const result = db.exec(query);
        if (result.length === 0) {
          output.innerHTML = "<div class='info'>Query ran successfully but returned no data.</div>";
          return;
        }

        const table = document.createElement("table");
        const thead = document.createElement("thead");
        const tbody = document.createElement("tbody");

        const headerRow = document.createElement("tr");
        result[0].columns.forEach(col => {
          const th = document.createElement("th");
          th.textContent = col;
          headerRow.appendChild(th);
        });
        thead.appendChild(headerRow);

        result[0].values.forEach(row => {
          const tr = document.createElement("tr");
          row.forEach(val => {
            const td = document.createElement("td");
            td.textContent = val;
            tr.appendChild(td);
          });
          tbody.appendChild(tr);
        });

        table.appendChild(thead);
        table.appendChild(tbody);
        output.appendChild(table);
      } catch (err) {
        output.innerHTML = `<div class="error">${err.message}</div>`;
      }
    }
  </script>
</body>
</html>
